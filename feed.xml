<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="https://aaaab3n.moe/feed.xml" rel="self" type="application/atom+xml" /><link href="https://aaaab3n.moe/" rel="alternate" type="text/html" /><updated>2021-01-01T04:04:12+00:00</updated><id>https://aaaab3n.moe/feed.xml</id><title type="html">Canarypwn’s Natïve blog</title><subtitle>A life matrix to witness, think and love.</subtitle><author><name>Canarypwn</name></author><entry><title type="html">Intel Hackathon 2020 记录</title><link href="https://aaaab3n.moe/life/2020/12/17/intel-hackthon.html" rel="alternate" type="text/html" title="Intel Hackathon 2020 记录" /><published>2020-12-17T02:01:59+00:00</published><updated>2020-12-17T02:01:59+00:00</updated><id>https://aaaab3n.moe/life/2020/12/17/intel-hackthon</id><content type="html" xml:base="https://aaaab3n.moe/life/2020/12/17/intel-hackthon.html">&lt;h1 id=&quot;d-14&quot;&gt;D-14&lt;/h1&gt;

&lt;p&gt;大约在两周前收到了来自社长的&lt;a href=&quot;https://growthx.mysxl.cn/blog/2020-intel-open-innovation-hackathon&quot;&gt;推送&lt;/a&gt;，正好最近想恰点钱，之前的外包也没写完，于是准备去参加。正好 DEEMOS 实验室在做 CV 相关，所以我们自然选了赛道二。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4mJX8lG_caQpWluBgBs8a-kzYnmMVmVVQ9mJiN7u6STtdB4Oq3ofYR3BEKKj--gwRofPJzEDtDyFUx_Ye_jvsvmRku_5adc-9EnuKzZ5IQQbTCCA6j725IVW6qh5UhQDlMegoZeMzlmbyJWM2ZiwgcZ_0eGhhT_kaMeGcztifF-m6K03l35EzN6dZk_d3glrYn?width=1080&amp;amp;height=708&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;一开始的时候 intel 没有释放任何消息，不过我们猜测他们会给一个 SDK， 可能是超分辨率或者怎样的。但两周后就要参赛了，所以我们只能先找一个不错的创意。我们想到了将 UGC 用于匿名聊天，因为 DEEMOS 最近在做&lt;a href=&quot;https://anome.geekpie.club&quot;&gt;人脸风格化&lt;/a&gt;，而匿名聊天如果能让用户定义自己的形象，而这个形象和本人又有关联，不仅有趣还能规避一些问题。&lt;/p&gt;

&lt;p&gt;社长这时候说，他们以前去 Hackathon 通常都是在之前做掉 75% 后再去现场的，所以让我们提前做好充足的准备。&lt;/p&gt;

&lt;p&gt;我们进行了更加深入的讨论，我们大胆假设了 intel 给的这个 SDK 性能可以做到实时的视频处理 &lt;del&gt;因为连这都做不到这个网络也太菜了&lt;/del&gt; ，所以我们考虑了诸如狼人杀，剧本杀，跑团，语C，桌游模拟器这类。因为我们认为在游戏中加入风格化后可以让游戏变得更加好玩，而且像剧本杀这种本来在线下就要化妆，而且很好玩也很贵。如果在疫情这种时候搬到线上，如果我们做的效果还不错的话，那应该挺吸引人。intel 在本次比赛中还需要商业计划书，于是我们制定了 ToB 和 ToC 的两套方案，既可以卖给企业又可以做一个 app 给大家玩。&lt;/p&gt;

&lt;p&gt;最后简单分了一下锅以后就散会了，一切等 intel 公布 SDK。&lt;/p&gt;

&lt;h1 id=&quot;d-7&quot;&gt;D-7&lt;/h1&gt;

&lt;p&gt;在 D-7 日的时候，intel 公布了他们的 SDK，是一个将视频中的某个长期存在的对象进行替换，比如将猫片中的猫换一种眼睛的颜色这种。除此之外没有任何其他信息。如果我们要继续做之前的方案的话，这个 SDK 能不能进行直播我们是不知道的。&lt;/p&gt;

&lt;p&gt;于是我们又讨论出了一套方案，主要市场在于特效拍摄。灵感主要来自于影视飓风的一期视频。主要是人物，风格，场景的改变。&lt;/p&gt;

&lt;p&gt;当晚我们下楼去 DEEMOS 和学长们讨论，&lt;del&gt;被批判了一番&lt;/del&gt;。 UGC 和相关技术的论文在13年就有发布，但是一直找不到合适的落地场景。我们提出的”Fantastic Movie for everyone”明显不显示，否则早就有人做了。而且我们想的 styleGAN + intel SDK 几乎人人都会想到。而剧本杀的市场太小了。同时这项技术没有技术壁垒，快手抖音很方便就可以占领（虽然他们目前的滤镜效果一塌糊涂），学长传授了他的一些人生经验：多读论文，多看新闻，多上知乎。另一位学长提出了是不是可以往电商直播方面想，因为目前直播的互动其实不多。&lt;/p&gt;

&lt;p&gt;于是我们回到了社团，并且开始了&lt;code class=&quot;highlighter-rouge&quot;&gt;多读论文，多看新闻，多上知乎&lt;/code&gt;。发现学长不愧身经百战，因为我们找到了 intel SDK 的 source …&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;https://github.com/OndrejTexler/Few-Shot-Patch-Based-Training&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;居然连代码也不改，放在 ShanghaiTech 就等着收查重邮件吧&lt;/p&gt;

&lt;p&gt;于是我们对代码进行了评估，发现可以做直播，于是又继续讨论。社长希望我们发挥年轻人的优势，发现其他人发现不了的热点。&lt;/p&gt;

&lt;h1 id=&quot;d-4&quot;&gt;D-4&lt;/h1&gt;

&lt;p&gt;我们讨论了几乎所有东西，比如虚拟偶像，电视剧换装，婚恋市场，早教市场，艺术市场等等。发现还是做制作视频时的风格改变比较好。至少有60%的希望成功吧，如果 demo 做的还不错的话。于是开始了分工。一共五个人，一个人准备slides, presentation 和商业计划书； murez 负责神经网络训练; Logan 负责辅助神经网络训练；Leomond 负责后端和直播推流； 我负责&lt;del&gt;打杂&lt;/del&gt;前端和服务器。&lt;/p&gt;

&lt;p&gt;与此同时，我们准备复现一个 demo。&lt;/p&gt;

&lt;p&gt;https://www.bilibili.com/video/BV14a4y1W7ua&lt;/p&gt;

&lt;h1 id=&quot;d-2&quot;&gt;D-2&lt;/h1&gt;

&lt;p&gt;晚上的时候， Leomond 骑平衡车刷运动世界校园的时候由于上海沉降严重路面凹凸不平导致多处皮外伤，他&lt;del&gt;坚持跑完了运动世界&lt;/del&gt;后来社团寻求帮助。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4mBVc33ZQPRxLrMEmLWt_9ONBMbz2979OdMKNDNmd57prp_uSGCTY4k8DV5HrtiWYAEgBr3pqGCTAIHVbS6fYl6Qz4KFtVM45wiH6HW5LAtlnqJTaVsxq0DXGebe1Kj01GCb2Y1fve0wNMYFZ6eGk05DSwrbvRDofOJVvra__9_jObxF4oNgIu-ezwLe_rwwcb?width=768&amp;amp;height=1024&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;好在 ShanghaiTech 每个实验室都有 First Aid，几位大佬对急救的处理非常得当， Leomund 在学校也有常备药箱，附近实验室最近买了小米的平衡车轮椅套件，最终在凌晨3点， Leomund 回到了寝室。当晚， murez 开始训练第一个风格。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4mDXcwzsnj1ZAQprxA3MNFf5t13Zqld77kcixHPTUfktm2a9f-Jcd2Po00WHE4ZMwJQh4Jk9x9fOA2Hz80flOi70ED25Boo5jc9N-vB86e0O7TJxlzP2t8aRkFo5EnPljPtyJ9T3rNIoFMv-J_3VRAsiP42tWOS2tvI1plGxqYyZy87sk3RSWDP5QkkbdbF0A-?width=1024&amp;amp;height=384&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;赛博朋克2077 于今日8点解禁。&lt;/p&gt;

&lt;h1 id=&quot;d-1&quot;&gt;D-1&lt;/h1&gt;

&lt;p&gt;中午打包出发去北京。路上我的 surface 还因为磕了一下导致触屏报废 （开始收集 mbp 预算）&lt;/p&gt;

&lt;p&gt;总结一下，我们这次在去北京前完成了&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;整个计划，包括商业计划&lt;/li&gt;
  &lt;li&gt;前端模板，还缺和后端对接部分与推流&lt;/li&gt;
  &lt;li&gt;多个 styleGAN 模型，一些是实验室有的，一些是刚刚训练的，赛博朋克2077的模型也在当天开始训练&lt;/li&gt;
  &lt;li&gt;etc&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;同时我们全部开发人员配置了连回社团的 wireguard， 并用 FRP 映射出了三台服务器。因为我们有HPC团队的成员和实验室的搬砖工。这些机器包括&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;借用 HPC 的 2*64 核 AMD 处理器 + 8 * NVIDIA V100&lt;/li&gt;
  &lt;li&gt;实验室的 2080Ti * n&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;光说这些上百万的资源也没什么队伍能打败我们了吧（大嘘&lt;/p&gt;

&lt;p&gt;乘上了3点的高铁，高铁上的网络信号还是一点都不好，导致我们睡了一路。当晚入住了中关村旁边的如家酒店，黑客松还带酒店的体验是非常好的。当晚吃了旁边的达美乐。出来以后看到酒店门口一群人在玩滑板，想到如果有一段这样的风格化视频也是很好的，于是在他们的同意之下拍了一段他们的视频。&lt;/p&gt;

&lt;p&gt;当晚继续之前的计划，应该是凌晨睡觉的。murez 训练出了赛博朋克风格。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4m_bkzZiyEh52EZm7qkEFnBtwBU5ctKfRPK63Mb720n29fneduoyrxnQvNmeklnhDPesm74fOxWlRbLSDO0TF4_xWzsZvPG01JrP0jrYGtiJmZKlcELA1chbjo1I62OEVlIXhG0v0XJp8SRpxbycpG5yun0WSfV3PJCZsp2wqEh13adM0X6RGdmqVkqIHoeC2T?width=1024&amp;amp;height=346&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;d-day&quot;&gt;D day&lt;/h1&gt;

&lt;p&gt;早上8点打车来到比赛现场，现场的早饭是星巴克的可颂，TUNA和培根，不限量供应。（所以一个队友一个早上吃了五个，值回成本）&lt;/p&gt;

&lt;p&gt;进了会场内发现周围挺空的，就我们五个人占了一桌，铺了六台电脑显得有点挤。隔壁一个上大的研究生只身前来，还没做什么准备，看到我们的架势被吓了一跳。&lt;/p&gt;

&lt;p&gt;中饭和晚饭都是自助餐，就是有些辣。&lt;/p&gt;

&lt;p&gt;晚上出门的时候还下雪了，照了一张 Google 的雪景。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4mqxf5lMBeXrBXOmwqfGFmh8eiFvJe5-OSYyUlW8O-PnIhQh2tdWYRsko1lPj0S5Cxd67FUtHknEh73NtWyuNV00H4I3eQTQlll6RybBauGA7Qn5ySU6kfgdV3b2srX07rIP9wv1PaqVR4OfnwFg66ffEi0eLr9-my9IfhtGGDVsLY5yh73rSlv3_63LIjP6tI?width=1024&amp;amp;height=803&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当晚回酒店后又是很紧张的调试。 Logan 帮我解决了 Vue 的一些问题，凌晨的时候我把和后端对接的代码大致写完了。负责 pre 的队友和我们商讨 slides 和措辞，并且由同学帮助美化 slides。L 努力的优化 ffmepg 的推流，通过添加 buffer 的方法将直播帧率提高到了 512*512@17fps 。这个帧率是将源视频推流到上科大校内的某台服务器，经过处理塞进神经网络再推流回来的，所以这个成绩非常惊人了。&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/SytP1hhXPz4&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;而 murez 正在努力的进行赛博朋克风格的训练。我凌晨2点左右睡觉的，后来我才知道，murez 坚持到了凌晨 5点。&lt;/p&gt;

&lt;h1 id=&quot;d1&quot;&gt;D+1&lt;/h1&gt;

&lt;p&gt;这一天主要是开发的收尾工作。因为前后端对接问题我背了一些锅。其中发现了 Flask 的跨域问题，因为之前没有人用过 Flask 所以踩坑时间有点旧。不过最后因为 pre 效果的关系而没有采用前端演示的方案。&lt;/p&gt;

&lt;p&gt;商业计划在于我们是一种&lt;strong&gt;低成本高质量的视频解决方案&lt;/strong&gt;。如果不考虑 2B 的话，我们可以在每一个热点出来的第一时间发布预训练模型，帮助其他人制作。比如 bilibili 一个热点过后，一瞬间全是相关视频了。至少现在有些制作者还在用爱剪辑，那么我们提供的一个完整易用的解决方案会让很多用户来蹭热点。一方面这部分可以直接收钱，另一方面大量的使用也会间接的推动高性能芯片的销售和迭代，，就像抖音间接推动了智能手机的普及一样。&lt;del&gt;不过这里估计没 intel 什么事了&lt;/del&gt;。重要的是，这是一个基于热点话题，神经网络和硬件厂家的可以迭代的商业模式。&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/TXjWvf2tOGk&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;在5分钟的pre里面演示了现场直播，效果还不错。其他组也有做赛博朋克风格的，但是完成度没我们高。上大的那位最后做了教育方向，希望用这个神经网络来教别人艺术。我觉得想法挺不错，demo也还可以，但是 Q&amp;amp;A 的时候感觉完全没答到点子上…其中还有一个公司做的是虚拟偶像。一位不太年轻的大叔在会场上公然放爱酱的视频，想做一个24小时的人工智能驱动虚拟偶像。他最后说了一句，”虚拟的偶像，不虚拟的经济“。看样子这些人还是 too old too naive 了，我觉得大部分都是泡沫（难道是我老了吗）。最后他们是第一名。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4mkhgv1d7EvwOvzsLD5XnQnXWQ31V95yeNDqoRRrKQWsBQHfJ7nf9UxTiaDG1l_JMQk1oTy5VB9UdvNDpeLqXAFe_o2HGR8qqMyoOxbKFeKkw5D3ajuG5x9HD4gzEtXvAIoYTsbbfblpNUVEKXmaKoUzY_bdGRuxGayjlH4ZhWkj5V5Nhqr0Ek5V-ic2VcE0Do?width=1024&amp;amp;height=310&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Intel hackthon 一共有四个赛道。还有一个高二的学生一个人一组，用毫米波雷达做耳机的手势控制。其实我们觉得在耳机上加毫米波是不错的想法，如果用毫米波去扫描耳道建模就更好了，他拿了三等奖。&lt;/p&gt;

&lt;p&gt;晚上的时候和姚班的东西在宇宙中心五道口约饭。比赛房赞助的酒店到期了，我们在airbnb上找了一家民宿。说是五个人，这家民宿只有三个大床房。&lt;strong&gt;男同竟在我身边&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://snz04pap002files.storage.live.com/y4mdjGn7VkV2YRmz_7d1xSQY4kIETTLHNxoSZMCEEt1Nwc73WvU_9cbIYQCJiV0M9gzh1mwNXsmVKuTU2_ysC2oJH1ZbeJac-K5J-XRvMAFWRGTArRGsJ-iR9DLKYHM5jIQC6yd_trSCW85akQmisHW-I6o7o5PHThaYhv4pk3QxVMIcZRLIGGcsfgagboIVF_M?width=720&amp;amp;height=270&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;d2&quot;&gt;D+2&lt;/h1&gt;

&lt;p&gt;简单游览了一下就打道回府了。我去北理见了同学，吃了食堂的北京烤鸭。队友说要买烤鸭感谢社长，于是在嘎韭菜一条街的第一家店买了烤鸭。窗上写着64元两只。当我们走到中心的时候，见到了无数的稻香村，而且已经变成48元两只了。&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Life" /><category term="Hackathon" /><summary type="html">D-14</summary></entry><entry><title type="html">[ CS140 1-Introduction] Slides 笔记</title><link href="https://aaaab3n.moe/technology/2020/12/04/CS140-L1.html" rel="alternate" type="text/html" title="[ CS140 1-Introduction] Slides 笔记" /><published>2020-12-04T02:01:59+00:00</published><updated>2020-12-04T02:01:59+00:00</updated><id>https://aaaab3n.moe/technology/2020/12/04/CS140-L1</id><content type="html" xml:base="https://aaaab3n.moe/technology/2020/12/04/CS140-L1.html">&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;This page is based on &lt;a href=&quot;http://web.stanford.edu/~ouster/cgi-bin/cs140-spring20/index.php&quot;&gt;CS 140: Operating Systems (stanford.edu)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Homework and Slides can be found at &lt;a href=&quot;http://www.scs.stanford.edu/20wi-cs140/notes/&quot;&gt;CS140 Lecture notes (stanford.edu)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Backup on my &lt;a href=&quot;https://1drv.ms/u/s!Au3reWMu7K2ChIp_v_ywDUA3QhkIAA?e=btMkiE&quot;&gt;Onedrive&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/328021529&quot;&gt;论抄书 - 知乎 (zhihu.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;操作系统概论&quot;&gt;操作系统概论&lt;/h2&gt;

&lt;h3 id=&quot;原始操作系统&quot;&gt;原始操作系统&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://sn3301files.storage.live.com/y4mh0qpst6d3FEypH6IoGiDxVjKKCdGpKHMhSC5bZfyyt1yZYYUec9SstWLT4whtooAqjlrgUgLC7tzeaJpD6rN_fIRehWu8pGaErnnqxFjvqFVn_uirLresyku0tC2C2vthbApgnPJjYLtsiKAialJTFBf3Ywex3bk3eJU92oZab021xVAJ7d1sNwzihUUdGQt?width=1024&amp;amp;height=473&amp;amp;cropmode=none&quot; alt=&quot;image-20201204140048431&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;系统一次只能运行一个程序
    &lt;ul&gt;
      &lt;li&gt;OS 和 硬件都被 APP 唯一占用&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;多线程&quot;&gt;多线程&lt;/h3&gt;

&lt;p&gt;相比原始操作系统，一次可以运行多个程序&lt;/p&gt;

&lt;p&gt;但原始的多线程有诸多问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;无限循环&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;比如&lt;a href=&quot;https://zh.m.wikipedia.org/zh-hans/Fork%E7%82%B8%E5%BC%B9&quot;&gt;叉炸弹&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;可以利用 权限 来解决&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;内存访问无限制，会有安全问题&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;可以用 内存隔离 来解决&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;多用户操作系统&quot;&gt;多用户操作系统&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://sn3301files.storage.live.com/y4m2MKgQtle0L3ijuplaxMdkRUXbeqyalVj5tj_2hXetgcmxsmdC4bLLQCny9EN3PenhA4o5cfkk-slNREGrw2OdUdNTOQOJQ6HoINX6uss5iALIF2uAZEzWPLLq_LJxv_vuqs8NpxaVOikkYhYb8emWcpPYv8RTEpU1Tb129YTuEv-oImS0KiSskSKGQF0Mngq?width=1024&amp;amp;height=641&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;用户需要什么就给什么，但依旧会存在一些问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;程序太贪了 (Chrome吃内存)&lt;/li&gt;
  &lt;li&gt;当每个程序都申请内存的时候，申请内存的总量大于物理内存
    &lt;ul&gt;
      &lt;li&gt;解决: 虚拟化 (virtual memory, swap etc.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Super-linear slowdown with increasing demand (thrashing) （原文）
    &lt;ul&gt;
      &lt;li&gt;比如开了N个程序，每个程序只能分到 1/N 的资源&lt;/li&gt;
      &lt;li&gt;随着程序的线性增加，每个程序更处理不完，最终&lt;del&gt;堵马桶&lt;/del&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;操作系统保护&quot;&gt;操作系统保护&lt;/h3&gt;

&lt;p&gt;核心思想：隔离&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;抢占式： 给应用程序一个资源，如果别的程序需要的话，就移走它&lt;/li&gt;
  &lt;li&gt;中间层： OS用一些数据结构（比如表）来查询权限，OS会在程序访问底层的时候提供权限管理&lt;/li&gt;
  &lt;li&gt;root / user ：特权模式&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;典型的操作系统&quot;&gt;典型的操作系统&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://sn3301files.storage.live.com/y4mn70BkNola6wrRUKxV7Bj5QN44VFXohASIeb2ikpUVlLjnkl2MYqbzeNH1QkULsc7-0FN2GZW2TT-Oh_I_m07KphZPO5d4R17WKwk_9V0BhzN9OVXC6U7Nzd8Mmjjj8I_f9crtPX9Hjw9nzVGDuyfok87qqksz0oOjkUMnf9leuxixYX6-a7y-yqakT412d_V?width=1024&amp;amp;height=568&amp;amp;cropmode=none&quot; alt=&quot;image-20201204141457542&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;程序在 user 层执行，低权限&lt;/li&gt;
  &lt;li&gt;OS 在 kernal 层执行，高权限&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;系统调用-system-call&quot;&gt;系统调用 (System Call)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://sn3301files.storage.live.com/y4m4DCvJ_GPptwN7oLAeNjf6FkfMmijOfzzjcALtwCHHkO678KEk19-9siDkwGPI_P7b7X81vBMcsO_iknQqbgiFjAQNZp0lv0_CCOVGanpcKwfQR4DyOc4pJnwO_T2Z68FPByMLSVv0y83v1PZXQXwn_BHbOOm5uEAtEBFexQ5Cg7jUAwR4JQ2ixyo88Z-ntja?width=1024&amp;amp;height=601&amp;amp;cropmode=none&quot; alt=&quot;image-20201204141729074&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Applications can invoke kernel through system calls&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;应用程序可以通过系统调用来调用内核 (用特殊指令)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;应用程序&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;printf, scanf, fgets etc.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;系统接口&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;open, close, read, write etc. ( POSIX/UNIX )&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Example&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;printf 调用 write&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;img src=&quot;https://sn3301files.storage.live.com/y4mwvjtlByIoqbz6XTb5wfKLEMvzd5w1YWP_7fYROH8f0pXG4kQ4mO_h9WjHkIWrTwCVKojznhdFFH9BMXme91Owb8DpHJniqb_7MB2tg1KwJ42AcqtlxJqNs3iU_ORHBpl4aqcCj0ErmeTd1IuHS3MNRxC1nYK1jMRoVex52YZZk3b1gUgAkuraO5ywY_nkxbb?width=975&amp;amp;height=1024&amp;amp;cropmode=none&quot; alt=&quot;image-20201204142044506&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;另一个例子&quot;&gt;另一个例子&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;见 &lt;a href=&quot;http://www.scs.stanford.edu/20wi-cs140/notes/type.c&quot;&gt;type.c (stanford.edu)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;open 作为一个黑箱、接口返回状态码，便于调用与高级程序使用&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;保护&quot;&gt;保护&lt;/h2&gt;

&lt;h3 id=&quot;一个-cpu-保护的例子&quot;&gt;一个 CPU 保护的例子&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;内核时钟每 10ms 刷新一次检查权限&lt;/li&gt;
  &lt;li&gt;内核每次中断后由程序重新抢占&lt;/li&gt;
  &lt;li&gt;这样就避免了 CPU 无限循环&lt;/li&gt;
  &lt;li&gt;坏处是每个程序都很慢（之前提到过）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;###如何破坏计算机&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;把内存占满&lt;/li&gt;
  &lt;li&gt;叉炸弹&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;内存隔离&quot;&gt;内存隔离&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;定义
    &lt;ul&gt;
      &lt;li&gt;地址空间：一个程序占用的所有内存地址&lt;/li&gt;
      &lt;li&gt;虚拟地址：程序所见到的内存地址（即进程地址空间）&lt;/li&gt;
      &lt;li&gt;物理地址：物理的地址（内存）&lt;/li&gt;
      &lt;li&gt;翻译：将虚拟地址映射到物理地址 （页）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;优点：每一个进程都不知道别的进程的地址，因为它们看到的地址是不一样的&lt;/li&gt;
  &lt;li&gt;CPU 负责翻译&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;现代的内存保护&quot;&gt;现代的内存保护&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;CPU允许仅内核虚拟地址&lt;/li&gt;
  &lt;li&gt;CPU允许OS禁用（无效化）特定的虚拟地址
    &lt;ul&gt;
      &lt;li&gt;虚拟内存总大于物理内存&lt;/li&gt;
      &lt;li&gt;停止内存越界&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;因此便于优化（内存管理器只管理虚拟地址）&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;资源分配与调度&quot;&gt;资源分配与调度&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;一方面把所有资源给一个程序会让他跑得很快，但另一方面其它程序被中断了，会影响执行。
    &lt;ul&gt;
      &lt;li&gt;例如同一个任务在连续的物理内存上的访问速度很快&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;多线程对资源的利用率很高
    &lt;ul&gt;
      &lt;li&gt;AMD yes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通常情况下，少部分的任务是特别消耗运算的，其它任务加起来所占用的内存却很大。（二八效应？）
    &lt;ul&gt;
      &lt;li&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Canarypwn</name></author><category term="Technology" /><category term="CS140" /><summary type="html">Intro</summary></entry><entry><title type="html">近代史纲要期末论文</title><link href="https://aaaab3n.moe/education/2020/12/04/modern.html" rel="alternate" type="text/html" title="近代史纲要期末论文" /><published>2020-12-04T02:01:59+00:00</published><updated>2020-12-04T02:01:59+00:00</updated><id>https://aaaab3n.moe/education/2020/12/04/modern</id><content type="html" xml:base="https://aaaab3n.moe/education/2020/12/04/modern.html">&lt;h1 id=&quot;封建帝国末期的救亡图存与封建思潮的覆灭&quot;&gt;封建帝国末期的救亡图存与封建思潮的覆灭&lt;/h1&gt;

&lt;p&gt;摘要： 第一次鸦片战争揭示了近代史的开端，作为集前朝之大成的清王朝在面对内有外患时尽可能的延续自身。但种种改变最终因各种原因而失败。作者认为，旧体制下相比西方已经相对成熟的近代化世界，由于各种体系的缺乏产生了行政效率低下的问题。行政效率低下使得改革的成本上升，很多资源陷入了诸如政治内耗和贪污腐败，因而改革无法彻底，并且对于国力的损伤巨大。本文主要探讨了清王朝以及清朝中的各种势力采用的四种救亡图存的方法。第一个是太平天国，一个具有封建落后性的政权在面对因为封建主义而产生的改良新政权时，清王朝借助了外来的力量克服了难关，西方因变革而有的器物给了落后的封建王朝额外的力量，同时预示着封建思潮无法通过以迭代的消灭自身的方式得到进步。第二个是洋务运动，在清朝尝到对太平天国的胜果时希望进一步的借助西方的力量，尽管这为清王朝争取到了纸面上的力量，但是封建主义固有的行政效率低下问题导致了甲午海战的失败与洋务运动的破产。百日维新是来自民间的知识分子们尝试的由下而上的一次变革，也是新旧制度的正面冲突，虽然旧制度取得了上风，但是新思潮展现出了其力量。辛亥革命最终终结了形式上的封建帝国，完成了由旧到新的使命。&lt;/p&gt;

&lt;h2 id=&quot;旧式农民起义太平天国&quot;&gt;旧式农民起义：太平天国&lt;/h2&gt;

&lt;h3 id=&quot;太平天国的起因第一次鸦片战争&quot;&gt;太平天国的起因：第一次鸦片战争&lt;/h3&gt;

&lt;p&gt;在第一次鸦片战争后，由清王朝向列强赔款2800万元。这造成了巨大的亏空和逆差。据统计，道光二十七年至二十八年平均每年流出白银1000万元。这些钱最终被摊牌成了税收上的增加。当时的清王朝以农业为主，过重的税收最终造成了一般农民的破产和地主阶级对农民的土地兼并。手工业者阶级也因为鸦片战争所签订的南京条约，被更加廉价精良的外国工业品击败，最终破产。失去了土地和生活来源的农民和手工业者聚集在一起，为了生存而选择了起义。鸦片战争后十年间，各族人民自发的反清起义达100多次。&lt;/p&gt;

&lt;p&gt;在这一背景下，洪秀全借拜上帝教的名义，绘制了人人平等的远景，在传教过程中不断吸引教民，最终起义。与以往不同的是洪秀全结合了很多西方的宗教元素。这样一种接近西方的表象一方面为太平天国争取到了前期的来自西方的支持，另一方面让因为西方关系而破产或剥削的人民因此而感到自己拥有了特权。这种斯德哥尔摩式的反映表现了当时的人们对于初来乍到的西方话语厌恶但又不得不诚服的处境。&lt;/p&gt;

&lt;h3 id=&quot;太平天国的批判&quot;&gt;太平天国的批判&lt;/h3&gt;

&lt;p&gt;但是这种假借西方宗教与人民利益，实际依旧以封建传统统治为本的政治方式仍旧没有比以往的农民起义展现出更多的先进性。太平天国的消亡也和历次的农民战争展现出了一样的特征。在定都天京以后太平天国不再以惊人的速度扩展，英国人F. A. Lindley在1866年英文版《太平天国》第一卷中指出：“南京的占领完全改变了天王的战术，他不再继续进行由前进的恐怖来制衡满洲的、迅速和凯旋的进军，却把他的党徒集合在南京及郊区周围，在同一时期从事组织有朝廷和法院的正规政府。”与此同时，在政治上，洪秀全在天京被架空，东王和翼王开始争夺权力。在经济上，太平天国执行圣库制度。太平天国圣库的物资来源，约有以下五方面；一是造反初期持上帝全会众交给圣库的银粮衣物；二是打败清军或攻克城镇所获的战利品；三是各处城乡的员献及对富户派大捐、打先锋所得的财物；四是“科派”、田赋与工商税的收入；五是百工衙的生产品（如同今日的国营事业所得）等。天京城中设立的百式衙与诸匠营，是圣库物资的重要来源之一。这种表面上的经济平等无法继续迭代，经济计划最终必将破产。这样的政权，经济和武装是无法长久对抗清王朝和对太平天国敌视的西方列强。在上海，西方租界组建了洋枪队，利用先进火器阻挡了太平军的进攻。清王朝的洋务派们组建的精锐部队最终结束了太平天国。&lt;/p&gt;

&lt;p&gt;自古以来，中国大地上一次次政权更替的同时展现出了封建王朝自我更新迭代的生命力。太平天国虽然在制度上有所创新，但其本质还是封建思想和农民起义的旧产物。而清王朝相比之下通过学习西方，加上西方因为更好的维护自己在中国的利益而给与的援助，度过了一个封建王朝的晚期危机。这反而表明了封建主义自我迭代手段的失效以及资本主义与帝国主义所能给国家带来的强大生命力。在之后的时间里，洋务派因此占据了清王朝政治的主流，开启了一个封建王朝的自强运动。&lt;/p&gt;

&lt;h2 id=&quot;地主阶级洋务派洋务运动&quot;&gt;地主阶级洋务派：洋务运动&lt;/h2&gt;

&lt;h3 id=&quot;师夷长技旧制度的延续&quot;&gt;师夷长技：旧制度的延续&lt;/h3&gt;

&lt;p&gt;在清军和太平军两大敌对阵营的战争中，双方几乎是不约而同地同步实行“师夷长技”。两军对阵，指挥官和士兵对于敌方武器锐利程度感触最为敏锐，追求新式而有效战胜敌人的武器，最没有保守观点。太平军为了制胜清王朝而“师夷长技”，清军为了制胜太平军而“师夷长技”，这是历史的必然。1856年曾国藩攻陷安福县时，“夺获洋枪炮械藤牌四百余件”；1859年，曾国藩说太平右军主将韦志俊向湘军投降时所带“器械甚精，洋枪甚多”；同年胡林翼奏称太平军杨辅清攻池州城“施放洋枪子落如雨。” 因此在洋务运动中，各派系都在努力提高火器在军队中的比例。摇曳的清王朝有着十足的动力来进行军事方面的改革以一定程度上的保全自身，因此慈禧太后也予以推动。武器的西方化进而带动了经济，外交等的西方化。&lt;/p&gt;

&lt;p&gt;其中多项的引进与改革对今后的清王朝产生的深远的影响，在此进行列举说明：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;现代银行体系&lt;/p&gt;

    &lt;p&gt;清朝通过各种丧权辱国的条约，需要向列强赔付13.2亿白银（如果加上利息，数额则更加惊人），相当于1901年国家财政收入的11倍，这些钱远远超过了清朝的还款能力。在过去清朝的国库还有盈余的年代，天子必须通过游览旅行来消费国库中积蓄的无法流通的财富。而在现代金融制度的引进后，由外国人建立的海关和银行一方面为清王朝增加了收入，另一方面在清政府需要钱时提供贷款。甲午战争的赔款就是向英德法俄银行团借款来付的。洋务运动的产物在洋务运动失败后还能继续帮助清廷苟延残喘。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;新式教育（新学）&lt;/p&gt;

    &lt;p&gt;洋务派在全国修建了30余所近代新式学校，用来培养科学、军事、翻译人才。并且用于教育事业的投入在1900年后翻了几番，原因在于列强将庚子赔款的钱用于清王朝的教育设施。但直到清末新政，清朝选拔人才的方式依旧是科举，大量接受了新式教育的年轻人并不能找到能够接纳他们的工作，先进的自由平等思想使得他们对于清朝本身进行反思。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;不论是现代银行体系还是新式教育，他们一个反而使旧制度下的王朝受到了更加严重的剥削；一个不断的挖掘着王朝的根基。不断引进新思潮的旧王朝就像是自身的掘墓人。在面对列强所要求的巨额赔款时，清王朝选择向西方国家开设的银行贷款，用金融主权换得了一时的平安。英国人帮助清王朝建立了海关体系，海关的税收进而推动着洋务实业的创立。例如上海的轮船招商局的启动资金就来自于上海海关的收入。但随着洋务运动的推进以及失败，清王朝的新兴知识阶级越发认识到清王朝是丧权辱国，民不聊生的罪魁祸首，并以各种方式谋求来自民间的变革，也就是来自新兴资产阶级的变革。&lt;/p&gt;

&lt;h3 id=&quot;洋务运动的结局注定的失败&quot;&gt;洋务运动的结局：注定的失败&lt;/h3&gt;

&lt;p&gt;甲午战争的失败宣告着洋务运动的最终失败，体量更大的清王朝在军事上无法击败后发的过去同为封建王朝的日本国。尤其是在军备上并没有明显代差的情况下。究其原因，有来自过去封建势力的阻挠，皇家挪用经费等。在甲午战争前夕，翁同龢和李鸿章因为相互的争执而克扣了北洋水师的维护经费。总而言之，封建旧势力阻碍着王朝真正的变革。例如修圆明园时慈禧太后以过生日为名，这实则是由大奇观来展现国家统治的生命力。对于封建王朝，无疑有助于树立统治阶级的权威，但却严重降低了年度预算和行政效率，最终展现在了战舰和军队的缺乏维护上。同时，洋务派各派训练的部队更像封建时期私人性质的武装，在甲午海战战败后福建水师向日本所求一艘被缴获的战舰，理由是该船属于福建水师而非北洋，武装私人化可见一般。&lt;/p&gt;

&lt;p&gt;洋务运动的失败证明了封建王朝各种自我救赎的失败，表明了旧制度下的王朝难以通过来自自身的变革完成近代化的转变，旧行政制度下的行政效率低下问题无法承载起新思潮所创造的产物。封建王朝自强运动的失败证明了其晚期危机的到来。&lt;/p&gt;

&lt;h2 id=&quot;资产阶级改良派百日维新&quot;&gt;资产阶级改良派：百日维新&lt;/h2&gt;

&lt;h3 id=&quot;百日维新的背景&quot;&gt;百日维新的背景&lt;/h3&gt;

&lt;p&gt;在洋务派改革的30年间，被称为同治中兴。中兴一次寄托了对疾病缠身的清王朝重新复兴的希望。洋务运动的失败标志了同治中兴只不过是晚期封建主义最后仅存的一些精神而已。现代史学家芮玛丽所著《同治中兴》里面对“中兴”的定义如下：不但一个王朝，而且一个文明看来已经崩溃了，但由于19世纪60年代的一些杰出人物的非凡努力，它们终于死里求生，再延续了60年，这就是同治中兴。甲午海战的失败同时激起了新型知识分子的愤慨：国家复兴的希望又再次破灭。从国家层面上进行上至下的改革成为了不现实的事情，从新式学堂中出来的新兴知识分子们希望自己的意见能被清朝采纳。适逢光绪帝因甲午战败而锐意变法革新。这次变法得到了慈禧太后的默许。&lt;/p&gt;

&lt;h3 id=&quot;百日维新的结果&quot;&gt;百日维新的结果&lt;/h3&gt;

&lt;p&gt;百日维新本质上是新旧体制的正面冲突。新兴知识分子大刀阔斧的想对整个国家进行改革，以一种极端的方式带着整个国家步入近代化。而旧体制下的保守势力一方面不甘心自己政治话语的剥夺，另一方面看出了过激的改革有将整个国家带入灭亡的危险。最终旧体制因为掌握兵权而取得了暂时的优势。&lt;/p&gt;

&lt;p&gt;虽然代表旧体制的朝廷暂时占据了优势，但是原本拥戴朝廷的新兴知识分子们却不愿意再承认清朝的正统性。步入近代后国家主义开始觉醒，封建主义时期树立君主权威的方式在近代启蒙之后就不再适用。部分知识分子们认为，打到清廷才是实现国家强大的捷径，这一思想因而在知识分子中分化成了保皇党和革命党。新旧体制的冲突仍在继续。从百日维新以后，清王朝因为对变革的不信任，并且国力也不允许其体制发生根本上的改变，研究改革的主力落到了新兴知识分子身上。&lt;/p&gt;

&lt;p&gt;总的来说，封建体制维护自身的方式是为统治阶级树立权威。普通民众想要参与到日常的政治中去只有走官方指定的道路。同时封建体制在树立权威的同时造成了无意义的内耗。新兴的知识份子，也可以说是他们背后所代表的资产阶级，因为他们大多都是由新式学堂教育出来的，最终都将成为资产社会中的生产力，他们代表着资本主义的意识形态试图改善封建主义行政效率低下的问题以最大程度的利用生产力。&lt;/p&gt;

&lt;h2 id=&quot;后来的资产阶级革命派辛亥革命&quot;&gt;后来的资产阶级革命派：辛亥革命&lt;/h2&gt;

&lt;h3 id=&quot;新兴知识分子的作为&quot;&gt;新兴知识分子的作为&lt;/h3&gt;

&lt;p&gt;积重难返的清朝廷已无法从体制上根本的改变其封建主义的实质，清末新政虽然形式上学习西方，但由于主政大臣行政效率低下，国库亏空，满汉矛盾以及有改革报复的知识分子不是在逃就是被清政府通缉，剩下的也因为其他人的遭遇而不相信清朝廷的诚意。事实上，部分知识分子的信任在百日维新时就已经结束，黄兴最早在1903年筹划起义，一直持续到1911年。在这期间不乏知识分子与普通民众的支持。&lt;/p&gt;

&lt;p&gt;并且随着代表着自由平等的西方思想涌入，印刷业在上海的发展，举国上下都出现了同情革命者。这也让革命党人有机可乘。在多次的失败之后，武昌起义获得了成功，并最终推翻清朝的统治，因而第一次确立共和政体。&lt;/p&gt;

&lt;p&gt;但是革命党人面对袁世凯几乎没有取胜的可能，但袁世凯也不愿通过武力的方式获得权力，最终以约定的方式成为总统。&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;正如现代人面临着从现代到后现代的迷茫一样，面对如此大体量的清朝，当时的统治阶级在进入近代史时必然需要试错，但世界上几乎没有一个国家能像清朝有如此强大的生命力进行如此多次的试错。在清朝一次次的实践中，我们可以总结出历史规律，如同严复的天演论一样，在面对内忧外患的情况下，一个能够进行军事研发动员，拥有强大生产力进行工厂生产，一个行政效率高避免腐败和内耗的体制才能度过筛选，避免灭亡的命运。&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Education" /><category term="Essay" /><summary type="html">封建帝国末期的救亡图存与封建思潮的覆灭</summary></entry><entry><title type="html">使用 GitHub Actions 与 Cloudflare 重构博客体验</title><link href="https://aaaab3n.moe/technology/2020/11/28/github-and-cloudflare.html" rel="alternate" type="text/html" title="使用 GitHub Actions 与 Cloudflare 重构博客体验" /><published>2020-11-28T02:01:59+00:00</published><updated>2020-11-28T02:01:59+00:00</updated><id>https://aaaab3n.moe/technology/2020/11/28/github-and-cloudflare</id><content type="html" xml:base="https://aaaab3n.moe/technology/2020/11/28/github-and-cloudflare.html">&lt;h2 id=&quot;caution&quot;&gt;Caution&lt;/h2&gt;

&lt;p&gt;Due to rendering problem, some characters can’t be displayed correctly by markdown ( &lt;strong&gt;such as $&lt;/strong&gt; ). Read source code instead.&lt;/p&gt;

&lt;h2 id=&quot;为什么不自己-host-服务&quot;&gt;为什么不自己 Host 服务&lt;/h2&gt;

&lt;p&gt;正如 苏卡卡 在  &lt;a href=&quot;https://blog.skk.moe/post/cloud-and-sla/&quot;&gt; 谈谈云服务和 SLA &lt;/a&gt;  中说的，在线云服务的 SLA 相比自己 Host 一个服务，可用性有很明显的提升。而且 GitHub Pages, GitHub Actions 和 Cloudflare 都是有免费额度的，对于个人用户完全够用。相信很多人之前买了 VPS，之后因为各种原因没有做好备份导致写了很久的博客文章丢失的事情，GitHub 的存储服务也能解决这个问题。&lt;/p&gt;

&lt;h2 id=&quot;为什么不用之前的-netlify&quot;&gt;为什么不用之前的 Netlify&lt;/h2&gt;

&lt;p&gt;之前笔者是使用 Netlify 来构建博客的， Netlify 可以 Hook 住某个 GitHub repo， 在有 commit 的时候自动拉下来。它有一个 ubuntu 的虚拟环境，根据写的指令自动构建完后 Host 网页。 Netlify 还有自带的 CDN 和 DNS解析服务，在刚开始搭建博客的时候， Netlify 用的是 Digital Ocean 的 CDN，它的日本节点对于大陆网络的友好程度是要高于 Cloudflare 的。&lt;/p&gt;

&lt;p&gt;但最近 Netlify 推出了更加严格的限制，限制了网页流量和编译所用的时长。我一个月后去看发现欠费了 7 美元。再加上现在 DO 的 CDN 对大陆的友好程度直线下降， Cloudflare 在声誉和基础设施上的投入上也使我非常青睐。一个大一同学的项目  &lt;a href=&quot;https://github.com/Spedoske/CloudflareScanner&quot;&gt;Spedoske/CloudflareScanner (github.com)&lt;/a&gt; 可以扫描出最快的 Cloudflare 节点，有着很多用途。&lt;/p&gt;

&lt;h2 id=&quot;github-actions&quot;&gt;GitHub Actions&lt;/h2&gt;

&lt;p&gt;简单来说，GitHub Actions 可以提供一台无法直接访问的 Azure ，通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;.github/workflows/*.yml&lt;/code&gt; 执行所写的指令。 Azure 可以提供 Ubuntu 、 Windows 等环境。另一位同学的项目 &lt;a href=&quot;https://github.com/KiruyaMomochi/RediveExtract&quot;&gt;KiruyaMomochi/RediveExtract (github.com)&lt;/a&gt; 就是使用 GitHub Actions 抓取公主链接的新版本然后解包剧情推送到 Telegram Bot 上。甚至有人用 GitHub Actions 来自动构建 OpenWRT （&lt;a href=&quot;https://github.com/Hyy2001X/AutoBuild-Actions&quot;&gt;Hyy2001X/AutoBuild-Actions: 使用 Github Actions 编译 Openwrt&lt;/a&gt;）。本文主要介绍了三种框架的 GitHub Actions 。&lt;/p&gt;

&lt;h3 id=&quot;jekyll&quot;&gt;Jekyll&lt;/h3&gt;

&lt;p&gt;Jekyll 在官方 &lt;a href=&quot;https://jekyllrb.com/docs/continuous-integration/github-actions/&quot;&gt;GitHub Actions &lt;/a&gt; 提供了 GitHub Actions。不过由于我的依赖和官方的 bundler 版本冲突，所以选择自己写。&lt;/p&gt;

&lt;p&gt;该文件见  &lt;a href=&quot;https://github.com/Nyovelt/jekyll-theme-mdui/tree/master/.github/workflows&quot;&gt;jekyll-theme-mdui/.github/workflows at master · Nyovelt/jekyll-theme-mdui&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name: Build and deploy Jekyll site to GitHub Pages

on:
  push:
    branches:
      - master
  workflow_dispatch:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;首先的 name 是整个 GitHub Action 的描述&lt;/li&gt;
  &lt;li&gt;on 代表何时触发 Action
    &lt;ul&gt;
      &lt;li&gt;push 代表当某个分支有提交时触发 push&lt;/li&gt;
      &lt;li&gt;workflow_dispatch 提供了网页手动触发&lt;/li&gt;
      &lt;li&gt;此外还有每按一次 star 触发 和 schedule 的按时触发&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jobs:
  github-pages:
    runs-on: ubuntu-latest
    steps:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;表示使用 ubuntu-latest 作为构建机的操作系统，用 docker 的同学应该很熟悉&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      # Use GitHub Actions' cache to shorten build times and decrease load on servers
      - uses: actions/cache@v1
        with:
          path: vendor/bundle
          key: $-gems-$
          restore-keys: |
            $-gems-
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;由于 &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle install&lt;/code&gt;执行过程时间非常长，所以添加缓存来节省时间和公共资源。该代码块的意思是以每一个 Gemfile.lock 创建一次缓存，这样可以节省安装相应依赖所用的时间&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install gem git -y
          sudo gem install bundler:1.17.2 jekyll

      - name: Build jekyll
        run: |
          cd $
          bundle install
          bundle exec jekyll build
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;这两个就和正常 ubuntu 的运行命令一样了。 其中 &lt;code class=&quot;highlighter-rouge&quot;&gt;$&lt;/code&gt;是 GitHub Actions 的环境变量，表示了 repo 所在的目录&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      - name: Invoke Deployment
        with:
          ACCESS_TOKEN: $
          BRANCH: gh-pages
          FOLDER: _site
        uses: JamesIves/github-pages-deploy-action@3.2.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;这一段代码块是将特定文件夹 &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt;内容推送到 &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt;分支。其中 &lt;code class=&quot;highlighter-rouge&quot;&gt;secrets.ACCESS_TOKEN&lt;/code&gt;可以在 上文 Jekyll 的文档中找到描述，是在 secrets 里创建一个键值对，来记录你的 GitHub Token 。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;hugo&quot;&gt;Hugo&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name: Build and deploy Hugo site to GitHub Pages

on:
  push:
    branches:
      - master
  workflow_dispatch:
  

jobs:
  github-pages:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Install dependencies
        run: |
          cd ~
          wget https://github.com/gohugoio/hugo/releases/download/v0.78.2/hugo_0.78.2_Linux-64bit.deb
          sudo dpkg -i hugo*.deb
          hugo version
           
      - name: Build Hugo
        run: |
          cd $
          hugo
          
      - name: Invoke Deployment
        with:
          ACCESS_TOKEN: $
          BRANCH: gh-pages
          FOLDER: public
        uses: JamesIves/github-pages-deploy-action@3.2.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;默认的 Ubuntu 是 bionic 版本，因此它的软件源不是最新的 （比如 apt 的 Hugo 版本是 0.4 因此不能正常编译）&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;node&quot;&gt;Node&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/amphineko/atomicneko/blob/master/.github/workflows/deploy-pages.yml&quot;&gt;atomicneko/deploy-pages.yml at master · amphineko/atomicneko (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name: Deploy to GitHub Pages

on:
  push:
    branches: 
      - master
      - deploy-action
  workflow_dispatch:
  

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
      with:
        persist-credentials: false

    - name: Invoke Webpack build
      run: |
        npm install .
        npm run build

    - name: Invoke Deployment
      with:
        ACCESS_TOKEN: $
        BRANCH: gh-pages
        FOLDER: dist
      uses: JamesIves/github-pages-deploy-action@3.2.1

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;github-pages--cloudflare&quot;&gt;GitHub Pages + Cloudflare&lt;/h2&gt;

&lt;p&gt;这个部分会介绍的简略一些，因为网上同类文档很多，而且操作很简单。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sn3301files.storage.live.com/y4mW-R9hfnuB-2UE2bDy4bqoWFMDe08UL1prmOjxt4HU23XIsTj6OMY595LcnBBv7UsmPabV16ys7ZaGxIf7Qm8JUb4FKKwnE3Hy_pCkEe9Cdl24YMt28ecm5BOaMT9NpoK4mDBDKEsxljhCa7Z7uJcHUtB9VUkJ3xMzrXPDJrGgFG7GE6vJLdvmcxOZrC-_pG4?width=1024&amp;amp;height=442&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;总之， Cloudflare 作为 CDN 提供了对网页 （也就是 GitHub Pages）的缓存，同时提供了很多安全选项，比如强制性的 https 和 TLS 。&lt;/p&gt;

&lt;p&gt;在从 Netlify 切换到了这一套新的架构以后，访问体验有了肉眼可见的提升。&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Technology" /><category term="Cloudflare" /><category term="Blog" /><category term="Website" /><summary type="html">Caution</summary></entry><entry><title type="html">明清历史中的国家自信与国家自觉</title><link href="https://aaaab3n.moe/literature/2020/10/08/lunwen.html" rel="alternate" type="text/html" title="明清历史中的国家自信与国家自觉" /><published>2020-10-08T02:01:59+00:00</published><updated>2020-10-08T02:01:59+00:00</updated><id>https://aaaab3n.moe/literature/2020/10/08/lunwen</id><content type="html" xml:base="https://aaaab3n.moe/literature/2020/10/08/lunwen.html">&lt;h1 id=&quot;明清历史中的国家自信与国家自觉&quot;&gt;明清历史中的国家自信与国家自觉&lt;/h1&gt;

&lt;h2 id=&quot;近代史的分划与明清历史&quot;&gt;近代史的分划与明清历史&lt;/h2&gt;

&lt;p&gt;人们传统地将历史分为三个阶段，分别是古代，中代和近代。在中国，公认的近代史是从1840年第一次鸦片战争到1949年中华人民共和国成立。笔者认为，近代史与近代史之前——也就是明清史有着不可分割的联系。明清是是中国历史上最后一个由汉族建立的封建王朝，在这两代王朝期间，中外都发生了不同于以往的进步与改革，这些进步与改革如何，又怎样的对近代史产生了影响是本论文探讨的重点。要探讨什么是近代史，了解近代与古代的不同是必要的事。笔者准备以外交与文化来发现明清历史中现代性的一部分。明清作为历史的转折点，一方面将中古代王朝中存在的部分发挥到了极致，另一方面完成了对于传统概念的重新解释，使得明清具有了现代性。在明清中，本文将重点放在了清朝历史，因为清朝更接近现代，同时清朝作为一个非汉人统治的王朝，也更具代表性与研究型。同时，在明清朝，&lt;strong&gt;国民对于国家的认同有了多次不同的诠释&lt;/strong&gt;，这些诠释将成为线索，引出近代历史。&lt;/p&gt;

&lt;h2 id=&quot;文艺复兴&quot;&gt;文艺复兴&lt;/h2&gt;

&lt;p&gt;“文艺复兴”是西方创造的词汇，是一种反应社会进步的文化，所以从这样的性质说，中国也发生过多次文艺复兴。在文艺一词中，包含着哲学、文学等精神文化，也包含着其背后社会组织的进步。&lt;/p&gt;

&lt;h3 id=&quot;清代的文化&quot;&gt;清代的文化&lt;/h3&gt;

&lt;p&gt;清代作为一个由满人统治的，从女真发源的王朝，但是从康熙即位后，之后诸帝皆修习汉族学术。这一点不但与元朝君主轻视汉文化大不相同，与历代汉王朝相比都毫不逊色。此外，清代的文化更多的受到了欧洲文化的影响。17世纪是欧洲文艺复兴的时代，传教士们将欧洲的成熟的文化带来了中国，给中国社会带来了剧烈的影响。从中国的学术可见，自明清交替，违心的新学衰落，而实证的考据学兴起。&lt;/p&gt;

&lt;p&gt;在过去中西方文化的交流往往产生有益的结果，比如永乐大帝凭借的大炮的优势击败了蒙古。明朝通过传教士的力量创造了红衣大炮。满洲的清朝也得到过一门红衣大炮，得以在进攻明朝时使用。之后平定准格尔和与俄国的战争中火炮也起了很大作用。&lt;/p&gt;

&lt;p&gt;在乾隆时代，中国的东西方文化交流达到了一个平衡。乾隆帝让传教士在北京西郊的圆明园内仿制了凡尔赛宫。而在欧洲，各国王侯都在宫中设中国宫或者中国室，来展示中国的陶瓷藏品。&lt;/p&gt;

&lt;p&gt;在明清的历史中，因为和西方的交流，社会、技术和文化都得到了进步。之后的近代东西方交流将会进一步加剧，东西方的联系以及其对文化的有利影响和融合是现代性的体现。&lt;/p&gt;

&lt;h2 id=&quot;世界交流与产业革命&quot;&gt;世界交流与产业革命&lt;/h2&gt;

&lt;p&gt;欧洲从古代开始就一直在西亚文化的影响下发展自己的文化，同样的在明清时期中原王朝也开始与世界接触并吸收他们的文化。&lt;/p&gt;

&lt;h3 id=&quot;郑和与朝贡&quot;&gt;郑和与朝贡&lt;/h3&gt;

&lt;p&gt;蒙古的西征带来了一次中西融合，在这次融合中，伊斯兰航海术传到了中国。郑和用西方的伊斯兰航海术七下西洋，最远甚至到达了莫桑比克的贝拉港。在这次远航中，郑和劝说南海诸国朝贡，宣扬国威。在后来，日本对朝鲜，美国的佩里舰队对日本也做过了同样的事情。所以，郑和下西洋的动机除了寻找建文帝的任务外，既是为了营造“万国来朝、四夷咸服“的气势,也是中央集权政府打击东南沿海民间贸易和海上流民的措施。虽然这样的歧视看上去只是虚名，&lt;strong&gt;但是这内化成为了国家信仰的一部分&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;笔者认为，明朝乃至清朝统治者心中应该依旧留存着对于元朝的世界地图。例如，永乐帝登基后就想办法征服越南，虽然在其死后由于安南的分离主义者而重获独立。此外，明朝还推行锁国政策，拒绝外国自发进行朝贡，同时严禁本国人民前往外国贸易。即使是朝贡国，朝贡规模也受到了严格的限制。而中国并非地大物博无所不缺，对国外贸易实际上有着极大的需求。在明朝国力衰退后兴起的倭寇战争就是这种矛盾的体现。所以朝贡与其实质上“天朝上国”的对外政策都是从自己的立场出发，而强加到别国头上。这样维护出来的形象最终&lt;strong&gt;内化成了天朝上国的形象，成为了国家信仰，并遗留到了清朝&lt;/strong&gt;。&lt;/p&gt;

&lt;h3 id=&quot;清朝的单边贸易与鸦片战争&quot;&gt;清朝的单边贸易与鸦片战争&lt;/h3&gt;

&lt;p&gt;虽然清朝的对外贸易相比明朝有所放松，在完成对台湾的征服后在广东进行单边贸易。清朝对贸易有着诸多限制，例如礼仪和交易场所。在这种不公平的交易中，英国难以将产业化的纺织品通过倾销的方式卖给天气炎热的广东，因此常年贸易逆差。但此时英国正在进行产业革命，需要大量资金，于是英国在印度种植鸦片，卖入中国。&lt;/p&gt;

&lt;p&gt;此时英国的产业革命如火如荼，相邻的法国的政治大革命也在鼎盛，物质和组织结构的革命推翻了中古代的根本，很快，这样的冲击也到了清朝。白银开始外流，于是清政府进行了第一次鸦片战争。产业革命的巨大成功使得英国可以让汽船驶入广州湾。锁国主义和自由贸易主义的战争使得清政府门户大开，天朝上国的形象不复存在。经济不景气使得清末叛乱频出。经济和国家信仰的下行使得清朝，&lt;strong&gt;一个闭关锁国的民族国家变得开放&lt;/strong&gt;，原先的国家信仰瓦解了，国民和统治阶级们急需找到一个新的信仰来维持清王朝的延续。如何对待西方列强成为了清末政治的核心，一直留到近代。&lt;/p&gt;

&lt;h2 id=&quot;统一与觉醒&quot;&gt;统一与觉醒&lt;/h2&gt;

&lt;h3 id=&quot;清朝的衰亡与国家主义的觉醒&quot;&gt;清朝的衰亡与国家主义的觉醒&lt;/h3&gt;

&lt;p&gt;当对外交涉成为清朝的政治中心问题的时候，清朝新设了总理衙门，由亲王任总理大臣，以平等的礼仪对待外国公使。清政府任用了“洋务派”中的新知识份子进行改革政治，即“同治中兴”。但是古老传统的旧体制并不会轻易瓦解，新旧冲突的时代仍在继续。同治中兴的中兴二字表现了当时知识分子的评价，表现了一种&lt;strong&gt;重新获得的国家自信&lt;/strong&gt;。太平天国与不平等条约使新兴阶级的阶级自觉得到了觉醒，&lt;strong&gt;清朝平定内乱后产生了国家与国家自觉&lt;/strong&gt;。这样的国家自觉也遗留到了近代的各种救亡图存运动中。&lt;/p&gt;

&lt;p&gt;但是传统的清王朝无法阻挡新时代的革命。中法战争和甲午战争的失败使得国家自信受到了进一步打击。其原因是陆海军尚未成为完全的国民军，例如南洋舰队的大臣在甲午海战后要求日本归还一艘在战争中被俘虏的战舰，理由是这艘战舰被误认为属于北洋舰队。国家的概念得到了一定程度的解体。&lt;strong&gt;私人武装&lt;/strong&gt;的概念直到中华名族抗日统一战线的形成导致的民族觉醒才有所消解。&lt;/p&gt;

&lt;p&gt;外界和内部的压迫使得国民中民族主义的兴起。义和团运动就是民族主义的产物，这是一次大规模的排外运动，民族主义具有现代性。&lt;strong&gt;近代民族主义&lt;/strong&gt;的序幕被拉开。&lt;/p&gt;

&lt;p&gt;随着国民对于清王朝失望情绪的累积，新兴的知识分子意识到打倒清朝是国家主义的捷径。国家主义本质是国民通过契约法律授权政府管理国家事物。于此产生了&lt;strong&gt;以革命为目的的民族主义&lt;/strong&gt;。例如孙文就有着打倒清朝，成就中国的名族主义的初期理想。&lt;strong&gt;国家主义的觉醒是近代史的高潮，它最终推翻了旧帝国本身。&lt;/strong&gt;清王朝留下的丰厚遗产使得中华大地上的各种私有化武装有能力争夺产生下一个国家的机会，各种思想也在中华大地上生根发芽。这样的历史一直持续到了近代史的结束。&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Literature" /><category term="EDU" /><summary type="html">明清历史中的国家自信与国家自觉</summary></entry><entry><title type="html">GeekPie DevOps 招新宣讲</title><link href="https://aaaab3n.moe/technology/2020/09/13/fresh.html" rel="alternate" type="text/html" title="GeekPie DevOps 招新宣讲" /><published>2020-09-13T02:01:59+00:00</published><updated>2020-09-13T02:01:59+00:00</updated><id>https://aaaab3n.moe/technology/2020/09/13/fresh</id><content type="html" xml:base="https://aaaab3n.moe/technology/2020/09/13/fresh.html">&lt;h1 id=&quot;引言&quot;&gt;引言&lt;/h1&gt;

&lt;p&gt;作为一个存在了多年的，人数最多的计算机社团，我们同时运行着很多的服务。那么我们是如何确保这些服务是可用的，我们社团开发的工作流又是怎样的。&lt;/p&gt;

&lt;h1 id=&quot;服务器&quot;&gt;服务器&lt;/h1&gt;

&lt;p&gt;作为一个经费充裕的社团，我们在不同的地方有着不同的服务器。如何管理这些服务器，如何方便开发者简单的部署服务是Ops的工作。就目前来说，我们在上海有三台阿里云服务器，两台香港的服务器，一台青云的服务器，还有两台在校内。其中在校内的两台中的一台还没有公网ip。把这些服务器方便稳定的链接起来是运维工作的基础。我们目前使用的是Tinc VPN，它是一种mesh，当每一个新节点加入的时候，它会自动连上其他所有的服务器，这样我们的每台服务器都能与其他服务器互相连通。&lt;/p&gt;

&lt;h1 id=&quot;工作流&quot;&gt;工作流&lt;/h1&gt;

&lt;p&gt;开发者需要的是一个快速稳定的部署环境。运维需要一个安全便捷的管理环境。所以我们所有的服务都是基于docker的。简单的来说，docker是为了克服不同的系统环境存在的，比如同样的代码在你的电脑上跑不一定能在我的电脑上跑，docker的思想就是将你的环境和代码打包在一起，在你分享代码的时候同时包含的你跑代码的环境。Github是代码分享与管理平台，方便每个人贡献自己的代码，也方便团队进行协作。社团在Github上有一个自己的Orgnization，开发者要做的就是将docker上传到github上。剩下的全都会较为自动化完成部署。&lt;/p&gt;

&lt;h1 id=&quot;技能&quot;&gt;技能&lt;/h1&gt;

&lt;p&gt;作为Ops，你需要对Linux系统熟悉，因为我们大部分的服务器都是跑着Ubuntu系统的。此外我们也很环境对网络有了解的人加入我们，因为目前的组网方式依旧不够完善。如果你会写代码，我们会更加欢迎。&lt;/p&gt;

&lt;h1 id=&quot;devs&quot;&gt;Devs&lt;/h1&gt;

&lt;p&gt;我们既是服务的管理者又是服务的开发者。作为一个立于上科大的社团，为上科大的师生服务也是我们的使命之一。作为一个新的社团，我们更倾向于使用现代，主流，新颖的技术和工具进行开发。&lt;/p&gt;

&lt;p&gt;比如镜像源网站是用vue3.0和vuetify框架进行开发的，并使用nginx作为服务器。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.murez.site/devops-2020geekpie/&quot;&gt;https://blog.murez.site/devops-2020geekpie/&lt;/a&gt;&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Technology" /><category term="EDU" /><summary type="html">引言</summary></entry><entry><title type="html">“万民管理万民”——国家的必然与终极</title><link href="https://aaaab3n.moe/literature/2020/08/31/Leviathan.html" rel="alternate" type="text/html" title="“万民管理万民”——国家的必然与终极" /><published>2020-08-31T02:01:59+00:00</published><updated>2020-08-31T02:01:59+00:00</updated><id>https://aaaab3n.moe/literature/2020/08/31/Leviathan</id><content type="html" xml:base="https://aaaab3n.moe/literature/2020/08/31/Leviathan.html">&lt;h1 id=&quot;万民管理万民国家的必然与终极&quot;&gt;“万民管理万民”——国家的必然与终极&lt;/h1&gt;

&lt;h2 id=&quot;引言&quot;&gt;引言&lt;/h2&gt;

&lt;p&gt;作者通过唯物的观点，在第二部分“论国家“，描述了自然状态中人们不幸的生活与渴望和平和安定生活的共同要求，于是出于人的理性，人们相互间同意订立契约，放弃各人的自然权利，把它托付给某一个人或一个由多人组成的集体，这个人或集体能把大家的意志化为一个意志，能把大家的人格统一为一个人格；大家则服从他的意志，服从他的判断。&lt;/p&gt;

&lt;p&gt;如同”罗马人民管理罗马民众“一样，S.P.Q.R 作为一个由罗马人民赋予权利的共和国，它管理着罗马民众，发动战争，进行建设。而罗马人民和罗马民众是同一批人，他们既是 S.P.Q.R. 的建立者又是一部分维护者又是被统治者。历史上，罗马共和国与罗马帝国在这个基础上进行解构，在古代和今天，都成为了一种文化，认同和意识形态。&lt;/p&gt;

&lt;p&gt;本文主要就“万民管理万民”为核心，论述霍布斯如何论述人们放弃个人的自然权利，来组成一个集体；这个集体如何通过契约与自然法的形式，使得人们服从；人们又是出于何种特性需要组成一个集体；这个集体为什么会存在，它为什么是最终形式。&lt;/p&gt;

&lt;h2 id=&quot;人性与自然状态&quot;&gt;人性与自然状态&lt;/h2&gt;
&lt;h3 id=&quot;自然状态即战争状态&quot;&gt;自然状态即战争状态&lt;/h3&gt;
&lt;p&gt;霍布斯认为，任何人之间是大致平等的，假如所欲求的东西是固定有限的，那么任何人之间会产生一种类似零和游戏的竞争关系。在这种关系之中，最为稳定和保全的办法就是先发制人，即双方以付出生命和自由的代价，让他人被征服，被控制。而控制他人的过程，被叫做统治。往往，这种过程伴随着暴力。&lt;/p&gt;

&lt;p&gt;出于欲求的天性，霍布斯认为在自然状态下这种争斗是普遍存在的。人们会为了求利而竞争，为了保全自身人们会猜疑对方，为了荣誉人们会去追名逐利从而侵犯他人。也就是说，只要人们还存在着欲望，并且有限的物质无法满足人类的欲望时，在自然状态下各方面都平衡的人们会为了各自的欲望去争斗。霍布斯这样说，“在没有一个共同权力使大家慑服的时候，人们便处在所谓的战争状态之下。”&lt;/p&gt;

&lt;p&gt;在战争状态下，人们很难得到一个好的生存状态。在战争状态下，由于争斗的普遍存在以及其暴力的过程与形成控制的结果，因此在这个较长的时代中，每个人都伴随着恐惧。同时，由于”征服“这一选项的存在使得公平交易受到了妨碍，人们会受到不公正的待遇。因此，理智的存在使得人们需要寻求一种出路来寻求生存与和平。霍布斯将这种和平条件称为自然律。&lt;em&gt;自然律是理性所发现的戒条或一般法则。&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;尽管霍布斯将自然律的发现归咎于理性，但非理性在其中起到的作用也无法忽略。人们生而就有的同理心和爱心使得人们寻求一种出路，也使得人们放弃了自身的权利。自然律的产生不仅仅是因为放弃短期利益而追求长期利益，“己所不欲勿施于人”这样的同理心也应当起到了一定的作用。&lt;/p&gt;

&lt;h2 id=&quot;契约与自然法&quot;&gt;契约与自然法&lt;/h2&gt;

&lt;h3 id=&quot;契约的建立与权利的扬弃&quot;&gt;契约的建立与权利的扬弃&lt;/h3&gt;

&lt;p&gt;为了避免进入恶性的不稳定的战争状态，理性的我们选择利用一切可能的办法来保卫我们自身。这种方法就是权利的让渡与停使。当双方争夺同一样事物时，一方可以出于生命与安全的考虑而将获得该事物的权利让渡给另一方。这一方通过使用了“让渡权利”而获得了自己”使用权利“的自由与生命的保全，另一方得到了”得到事物的权利“的自由。这是一种权利的出让。而契约就是权利的互相转让。也就是说为了避免进入战争状态，契约被发明了出来。&lt;/p&gt;

&lt;p&gt;人们为了保全自身，因此会广泛的和他人定立契约。通过契约，权利得到了交换。通过放弃权利从而得到生存的权利，通过放弃选择权的自由从而得到”自愿放弃“的自由。由此，契约的定立使人们摆脱了自然状态。但是契约本身不具备有效性。从最基本的来说，契约不过是言辞或者纸张。若要脱离自然状态，&lt;strong&gt;人们需要确保契约的有效性&lt;/strong&gt;。&lt;em&gt;”所订契约必履行。“&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;自然律与国家&quot;&gt;自然律与国家&lt;/h3&gt;

&lt;p&gt;霍布斯的法更多的不是法律，而是自然律。为了确定契约的履行，需要一种力量来使人们不去满足自身的利益、荣誉。即，有一种组织形态使得人们将自我放在了次位。那么这种组织形态一定是超越所有人的。霍布斯认为，人们可以将自己的权力交由一个组织，由这个组织”通过多数的意见把大家的一致化为一个意志的多人组成的集体。”而这本身也是一种契约。于是国家可以由此定义，即一群人签订一个契约，放弃自身先天占有的，对事物的占有权，并将权利移交给一个“多数人意志”的集体。互相与互相定立信约，以便使它能按其认为有利于大家的和平与共同防卫的方式运用全体的力量和手段的一个人格。&lt;/p&gt;

&lt;p&gt;这种信约就是自然律，这个意志就是国家。对于个人来说，个人舍弃了自己的权利来获得了非战争状态的和平，从而使自身得到了保全，这是契约。为了使契约得到保全，人们放弃了对于与事物契约的占有，将其移交给了国家意志。&lt;strong&gt;确定契约履行的方式是违约成本的增加&lt;/strong&gt;。在一个”多数人意志“的集体中，个人占有的自由与资源不值一提，国家衍生出了庞大的附属机构来确保契约的履行。&lt;strong&gt;看似人们放弃了权利和自由，但是因为国家和法的存在，人身安全得到了保全&lt;/strong&gt;，人们的权利和契约得到了履行，自然状态被遗弃了。&lt;/p&gt;

&lt;h2 id=&quot;国家意志&quot;&gt;国家意志&lt;/h2&gt;

&lt;p&gt;国家是一个意志的集体，是一种人格。但是在历史上，国家很容易联想到君王和帝国，霍布斯这里的国家不是一个实体，而是一种概念和意志。人们将权利托付给国家意志，而由君王和统治阶级进行意志的执行。公务员们，定立的法律，以及国家的一切，都是国家意志的产物。对于国家意志，人民由先天服从的义务，因为这是人民互相定立的契约，而没有毁约的可能。人们看似被君王统治着，实则是被自己所定立的契约所统治。&lt;strong&gt;国家意志的定立就是为了确保不陷入自然状态而督促着各种契约的执行。&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;国家与终极&quot;&gt;国家与终极&lt;/h2&gt;

&lt;h3 id=&quot;国家是社会组织的终极状态&quot;&gt;国家是社会组织的终极状态&lt;/h3&gt;

&lt;p&gt;“万民管理万民”，即由人民的共同意志国家来通过保障契约运行的形式维护者人们不落入自然状态。因此为了脱离自然状态，理性驱使着人们建立如国家一样的组织。在历史上，不论是游牧还是帝国，都遵循着这样的发展规律。同时，国家可以维护自身。通过保障契约的运行，以及所衍生出的一系列行政体系，大部分人仅为自我考虑的原子性在国家面前做出了让步，只要国家能继续维持契约的运行，那么国家的合法身份，即多数人意志的集合也能继续维持下去。因此在当前状况下，&lt;strong&gt;凭借个人无法消解国家&lt;/strong&gt;，对国家的消解依旧需要大多数人的意志。国家的裂解方法是国家这种组织（而不是某一个具体的国家）没有办法聚拢大多数人的意志了。这种情况我认为是存在的，即“大多数人违约”，由大多数人的意志不再支持国家组织的运行，国家的作用与身份得到了消解。然而，人们无法找到一个更好的集体来使自己免于落入自然状态；同时，解散国家的过程中大多数人的意志依旧在发挥一种集体性的作用，也就是&lt;strong&gt;大多数人毁约&lt;/strong&gt;，将自己托付给国家的权利收回，从国家的本质上说，这是解散国家的唯一方式。但是在国家意志面前，大多数人统一意志的行动本身就难以存在。像建立国家那样的“集体自发”式的订立契约的基础已经不存在了，因为之前的基础是为了避免进入自然状态而为了生存的理性考量，在面对国家时，如果国家没有发挥其应有的功能，大部分的意志得不到贯彻，可以重新集合大多数人的意志，寻求建立国家的新途径，从而使国家本身的属性（行政，司法等）得到&lt;strong&gt;升级&lt;/strong&gt;，让国家的形态更加稳固。当国家能发挥其作用时，出于落入自然状态的恐惧，大多数人出于理性的考量不会集体违约。随着国家机器的运转，民众参与国家事物的部分也越来越少，议员负责监督和提议，法官负责贯彻法律，公务员帮助着国家的运转，士兵们负责国家安全，国家的概念再一次超越了，”多数人的意志“并不是可数的人，而是国家中的每一个人，是&lt;strong&gt;不可数的&lt;/strong&gt;。因此，统一每一个人的意志，再次对国家这个超越每一个人的概念进行消解是非常困难的一件事。在历史上虽然有多次尝试，但至今都没有给出一个答案，由国家维持的和平与公平作为它创始的目的得到了完整的落实，国家也超越了”多数人的意志“的概念而成为了一个自动运行自动修补的高效机器。&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Literature" /><category term="EDU" /><summary type="html">“万民管理万民”——国家的必然与终极</summary></entry><entry><title type="html">修复由误操作导致的分区表重建问题</title><link href="https://aaaab3n.moe/technology/2020/08/21/fstab.html" rel="alternate" type="text/html" title="修复由误操作导致的分区表重建问题" /><published>2020-08-21T02:01:59+00:00</published><updated>2020-08-21T02:01:59+00:00</updated><id>https://aaaab3n.moe/technology/2020/08/21/fstab</id><content type="html" xml:base="https://aaaab3n.moe/technology/2020/08/21/fstab.html">&lt;script src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/x-mathjax-config&quot;&gt; MathJax.Hub.Config({ tex2jax: { skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'], inlineMath: [['$','$']] } }); &lt;/script&gt;

&lt;h1 id=&quot;起因&quot;&gt;起因&lt;/h1&gt;

&lt;p&gt;在8月初的时候，我接下了学校信息学院某实验室集群助管的工作，上任第一天的工作就是配置管理环境。集群的架构大致是这样，一共是约30台服务器，在上面跑 docker , 映射 ssh 端口，分派给不同的用户使用。除此以外还有两台大容量NFS服务器用于用户存储数据。&lt;/p&gt;

&lt;p&gt;我使用了 Portainer.io 进行多机器的 docker 管理。同时用了一个 shell 来完成其它机器运行 portainer.io - agent 以及挂载 nfs 磁盘的操作。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/Nyovelt/DevOps/tree/master/%E5%9C%A8%E5%90%8C%E4%B8%80%E5%AF%86%E7%A0%81%E7%9A%84%E4%B8%8D%E5%90%8C%E4%B8%BB%E6%9C%BA%E4%B8%8A%E6%89%A7%E8%A1%8C%E7%9B%B8%E5%90%8C%E5%91%BD%E4%BB%A4&quot;&gt;脚本&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;error&quot;&gt;ERROR&lt;/h1&gt;

&lt;p&gt;在某一次，由于 NFS 磁盘掉线导致 docker 卡在了 create 的状态上。没有在意，在 nfs 服务器重新上线后重启服务器，发现 docker 掉线了。不过机器足够多，因此把原先的 docker 放在了新的机器上面，这台服务器的问题就被搁置了。&lt;/p&gt;

&lt;p&gt;昨天去 SHLUG 的时候见到了 &lt;a href=&quot;https://github.com/PhotonQuantum&quot;&gt;@LightQuantum&lt;/a&gt; ，顺便和他说起了这件事情。我们都觉得很奇怪，于是进行排查，发现整个文件系统都被写保护了。最后发现在 &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/fstab&lt;/code&gt; 中是这么写的&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;10.15.??.??:/mnt/data /mount nfs  0 0
10.15.??.??:/mnt/data /mount1 nfs  0 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;于是想起来脚本中的这一行&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'helloworld'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; aaaa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;只有一个 ‘&amp;gt;’ 是覆盖文件并写入，因此我&lt;strong&gt;抹掉了整个分区表&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;还好大部分服务都在内存中，修复起来稍微容易一些。除了之前被重启过的和为了试验当场重启的。&lt;/p&gt;

&lt;p&gt;于是后面两台服务器，首先挂载分区&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; mount &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; remount,rw /dev/sda3 /
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;对于其它机器以及这两台服务器，更改其分区文件&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/dev/sda3 / ext4 defaults,relatime 0 1
/dev/sda1 /boot ext4 defaults,relatime 0 0
/dev/sda2 none swap defaults 0 0
/dev/sdb1 /data ext4 defaults,relatime 0 0
10.15.??.??:/mnt/data /mount nfs defaults 0 0
10.15.??.??:/mnt/data /mount1 nfs defaults 0 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;加入 defaults 属性也许会让 nfs 运行的更好一些。&lt;/p&gt;

&lt;p&gt;这样就修复完成了。&lt;/p&gt;</content><author><name>Canarypwn</name></author><category term="Technology" /><category term="Linux" /><summary type="html"></summary></entry><entry><title type="html">我为什么对新生说’‘快逃(‘’</title><link href="https://aaaab3n.moe/life/2020/07/23/Run-away-from-shanghaitech-%E5%89%AF%E6%9C%AC.html" rel="alternate" type="text/html" title="我为什么对新生说''快逃(''" /><published>2020-07-23T02:01:59+00:00</published><updated>2020-07-23T02:01:59+00:00</updated><id>https://aaaab3n.moe/life/2020/07/23/Run-away-from-shanghaitech%20-%20%E5%89%AF%E6%9C%AC</id><content type="html" xml:base="https://aaaab3n.moe/life/2020/07/23/Run-away-from-shanghaitech-%E5%89%AF%E6%9C%AC.html">&lt;script src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/x-mathjax-config&quot;&gt; MathJax.Hub.Config({ tex2jax: { skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'], inlineMath: [['$','$']] } }); &lt;/script&gt;

&lt;p&gt;写于上海高考出分周&lt;/p&gt;

&lt;p&gt;对于一个已经度过大学一年的人来说，填志愿和高考的过程依旧给我留下了很大的创伤，以至于到今年高考出分的时候，我还在梦中交了一次高考白卷。作为一个经历过填志愿，也听说过很多故事的人，我觉得还是有一些经验可以分享的。&lt;/p&gt;

&lt;p&gt;或许从大学之后多次梦见高考的创伤来看，高考和填志愿的过程已经于我是一种象征的，摆脱不了的时光了。我也希望通过此文，能够对我过去的经历进行一次重新建构。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;声明：本文并不是一篇招生宣传，如果你读了这篇文章后选择去了上科大，南科大或是其他学校，那笔者一定特别开心。&lt;/strong&gt;&lt;/p&gt;

&lt;h1 id=&quot;快逃&quot;&gt;快逃&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;https://rpbciq.sn.files.1drv.com/y4mXeIg06I5qFnj3-pfGlOjPnfCMgMd4_Yn2Uykz7mh8JvRxJwrpWDVhO73w7X9KW0-jGldlVrPhEhGVsunD4xKs8rPTvbI17fji8qkB5MfjLhNUks5Cn4g0AAQGeVWNxrfsUcjBHdmv7MFJM9hIBYQognRe4NnHB_Ej8xYpbOa08IYVzWeaW4tZX8L5HaNjY-R_xgPyh6tVafxxm8HmddJKw?width=591&amp;amp;height=1280&amp;amp;cropmode=none&quot; alt=&quot;Run away&quot; /&gt;&lt;/p&gt;

&lt;p&gt;记得在7月18号的时候，并介在新读写的专栏中做了一场&lt;a href=&quot;https://mp.weixin.qq.com/s/i8L2BbvmbfCw4_YptUOqcg&quot;&gt;一个小时的分享&lt;/a&gt;，接下来的一个小时便是清华大学计算机与金融专业的宣讲会。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://rpbviq.sn.files.1drv.com/y4mWNddP63MstN1q2CSKpzEZvO2zJpJDECc3BrfHewKUTvzGuZ0moWRVbrsqwcxZZjNJHiMhvqlYxDOOfLYqwgWOYo8L5omFHfUmrjWKuoMMIiSJHQVe32sf9x5S_OUiIJ_ZAiaRcFcRk-94o27ZVTlw5R4PYMUe4ofZgTa3q3wPiXd4OC0dP_jQiSSBMlLVVKLMKmOFvWiBTzYLU5PLPuwLQ?width=858&amp;amp;height=1679&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;前一个小时的直播是放弃复旦去HKU的并介，并且他还成功的从新闻系转到了数学系。后一个小时的直播是具备了清华，计算机，金融这三个光环的新专业。可想而知，在机构和家长眼中，这样的新专业有多少分量。计算机专业是清华收分数一数二的专业，加上金融二字，这样的专业估计是要让举子们望尘莫及了。&lt;/p&gt;

&lt;h1 id=&quot;我是怎么选专业的&quot;&gt;我是怎么选专业的&lt;/h1&gt;

&lt;p&gt;我在&lt;a href=&quot;https://aaaab3n.co/life/2020/04/15/computer-science&quot;&gt;这篇文章&lt;/a&gt;中也许提到过。我从小就对计算机感兴趣。同时，上海的市重点一般都会培养学生的职业规划能力。比如我所在的上大附中在初三放假的15天后就召集了我们布置作业，其中一个就是做职业规划量表。高中的时候还会联系企业，让我们去参观。据我所知，南洋模范也会做类似的量表。&lt;/p&gt;

&lt;p&gt;所以对于我来说，目标是很清晰的：我想学计算机。当然，高考志愿还有滑档的说法，所以我选择了物理作为备选。当高考出分后，我的位次并不是很靠前。由于家庭话语权和其它复杂的原因，由我母上来主导我高考志愿的填写。所以除了提前批选了上科大以外，第一版志愿是从高分到低分填，因为母上对志愿填报了理解仅来自于辅导机构。可想而知，这一版志愿在我看来是极不满意的。( 把24个志愿全部填满2333，在我的要求下，她把最后一位改成了杭电( ACM强校 ))。为此，我们还有过争论。当然，这也有一部分是观念的关系，比如我当时还不知天高地厚的敢在零志愿填清北，而她极力反对，原因是“志愿表被别人看到是会笑话你的”。分歧由此可见。&lt;/p&gt;

&lt;p&gt;于是，最后我们达成了一定的妥协。在较高的分数段上，我将我喜欢的学校，喜欢的专业，按照喜欢程度一个个排列下来。而低分段则由母上自由发挥。&lt;/p&gt;

&lt;p&gt;最后，算上&lt;strong&gt;加分&lt;/strong&gt;，以高出分数线9分进入上海科技大学。顺便说一下，上海科技大学（在2020年之前）都是满足第一志愿招生的，这一点非常友好。&lt;/p&gt;

&lt;p&gt;备注：在填志愿之前，笔者已经取得了上科大加分。&lt;/p&gt;

&lt;h1 id=&quot;为什么要说快逃&quot;&gt;为什么要说快逃&lt;/h1&gt;

&lt;p&gt;这里仅以上科大举例，因为可能窝在上科大，环境稍微闭塞了些，潜移默化的觉得我们比较先进吧。毕竟和其它学校交流实在太少了。&lt;/p&gt;

&lt;p&gt;上科大是一所非常特殊的学校。祂没有985光环的加持，本科毕业后的出路有限。在大一期间，我们经历了严格的查重，全英语方言上课。我身边就有同学认为上科大不是一所好学校，因此早早的选择了考研的出路，准备四年后选择一条更好的道路。&lt;/p&gt;

&lt;p&gt;对于计算机科学来说上科大是梦幻的。就像我开放日与学校的时候碰到的 Ingress玩家们聊天的时候得知的， 我作为一个计算机科学家是绝对不会拒绝一所大一就把解释器作为作业的学校的。（后来发现，其它作业也很有挑战性，也很有趣）。但是，对于其它同学，甚至包括不把计算机当作未来所从事事业的非信院同学来说，用 python 写解释器是一件很有难度的事情。其中还包括期末极其严格的，毫无水分的查重。这些事情可能在国内其它的常规高校是遇不到的，所以我认为，这才是&lt;strong&gt;正确且有效&lt;/strong&gt;的计算机科学教育。&lt;/p&gt;

&lt;p&gt;所以我想说什么呢，上科大对于我来说有祂独特的魅力所在，而你要感知到祂的魅力，你需要了解很多的信息，让自己上大学前就成为一名准计算机科学家。你需要知道的是你未来要做什么，你是不是要改变这个世界什么。这样你才足够有能力从上科大吸取你想要的资源，这种资源甚至不止局限于上科大。曾经微信公众号里推送过一篇毕业生的文章，是《上科大满足了我的所有幻想》，社团旁边的学长立刻评论说，那这个人的想象力也太匮乏了。&lt;/p&gt;

&lt;p&gt;所以大学到底是做什么的呢，&lt;a href=&quot;https://twitter.com/DelaYukiScarlet&quot;&gt;雪&lt;/a&gt;曾经在&lt;a href=&quot;https://github.com/Chi-Task-Force/Chi-Bot-Story&quot;&gt;迟先生们&lt;/a&gt;晒GPA的时候指出，在大学，如果不光光为了保研和转专业，GPA之外的部分也很重要（虽然雪好像只是高中生），经历和项目也占了很多重量。&lt;a href=&quot;http://www.houxiaodi.com/assets/misc/manual.pdf&quot;&gt;上海交通大学生存手册&lt;/a&gt;也是这么指出的。总之，大学&lt;strong&gt;不一定&lt;/strong&gt;是为了最后的那张毕业证，也&lt;strong&gt;不一定&lt;/strong&gt;是为了最后找到的那份工作。有时候很多无用的事情才是在大学这段最自由的时间中应该去做的。所以，一定要明白大学应该是什么样的，也一定要明白自己期望的大学生活是什么样的。&lt;/p&gt;

&lt;p&gt;所以我们常常会对想要报考上科大的同学们说，&lt;strong&gt;快逃！&lt;/strong&gt;就我而言，如果你真的了解了很多信息，还被我们的一面之词所劝退的话，那可能真的不适合这所学校2333。&lt;/p&gt;

&lt;h1 id=&quot;所以我想说什么呢&quot;&gt;所以我想说什么呢&lt;/h1&gt;

&lt;p&gt;正如存在主义告诉我们的那要，也许你的高考分数已经确定了，也许你去不了985，去不了211，去不了一本，去不了大专。但最好一定要清楚自己要做什么，想做什么。可能你三年都没有想清楚，没关系，大学四年和今后的人生中一定是能想清楚的。但如果你稍微考虑过一点的话，那再填志愿的过程中就用上这些想法吧。虽然有些事情已经无法改变，但你可以选择未来去哪个城市，从事哪种职业，身边的是什么样的人。&lt;/p&gt;

&lt;p&gt;正如并介拒绝复旦转而去HKU，从新闻系跨界到了数学系，只因一句“我想做科学家啊”。身边的人不甘心屈居现在的学校，转而考插班生，又在备考过程中了解到了自己真正的归宿。生化环材只要喜欢就不一定是坑专业，计算机和金融最后也会变成社畜。遵循父母的安排和从高到低谈志愿也不是一件坏事。人生中的很多决定就像这样，没有绝对的正确答案。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sfvxrq.sn.files.1drv.com/y4m4xUrwH3YqFrQB_dswHC-r_EE6MARb_F7VDv9K3-7q3lpFyITsUbA8bOB5cuxSZfkTFEFdgQEUTk681PoaPyJbbwLIaebThB0j93Uc-O3mI6AoACd6cfGwUqVpUlSjHLn9mrurcxxLyb6QfT8ivMb9mXDQFg4CqQRh1oZ28Z3u2LvNRXaJuxdwP4MWD8j5_OAdopK4CyN1MhnSHP3IlxTIQ?width=684&amp;amp;height=1436&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;后记&quot;&gt;后记&lt;/h1&gt;

&lt;p&gt;感谢朋友们的建议与鼓励。后续的改进意见还包括：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;就 家长对孩子志愿和未来的控制 与 孩子对自我未来的追求 两点分别展开批判与辩护
    &lt;ul&gt;
      &lt;li&gt;可以查看这篇草稿 (&lt;a href=&quot;https://1drv.ms/w/s!Au3reWMu7K2CgpliZgHDzSEE_q3CGw?e=vOQs7t&quot;&gt;https://1drv.ms/w/s!Au3reWMu7K2CgpliZgHDzSEE_q3CGw?e=vOQs7t&lt;/a&gt;, 密码 2333)&lt;/li&gt;
      &lt;li&gt;内容是关于法哲学原理中的家庭&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;南瓜灯博士的评论大概就是我想说的&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://5c8kzw.sn.files.1drv.com/y4mD-IcC20PzF5WLdgp4csjEvGNkkXZwWm2UoPjZ8qUd1XhBrudj-XcqQICxEY36sMOqispko5pNiVMk1OFsKYhMdEqXwUZJ1dj6LDGPUTQxHaQkBp9WUuoLD9gw1IzvyiZAhcW7w9TqdSg8-nob7JPgCCv8RHTGvOc__-bY52HHAFlV2k59leP1cn4kdbiBCHtQUpM9LdKC94M-weVJC-7gQ?width=828&amp;amp;height=702&amp;amp;cropmode=none&quot; alt=&quot;评论&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Canarypwn</name></author><category term="Life" /><category term="Life" /><summary type="html"></summary></entry><entry><title type="html">PIGEON OJ 配置指南（评卷机）</title><link href="https://aaaab3n.moe/technology/2020/07/07/pigeon-oj-config.html" rel="alternate" type="text/html" title="PIGEON OJ 配置指南（评卷机）" /><published>2020-07-07T02:00:59+00:00</published><updated>2020-07-07T02:00:59+00:00</updated><id>https://aaaab3n.moe/technology/2020/07/07/pigeon-oj-config</id><content type="html" xml:base="https://aaaab3n.moe/technology/2020/07/07/pigeon-oj-config.html">&lt;script src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/x-mathjax-config&quot;&gt; MathJax.Hub.Config({ tex2jax: { skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'], inlineMath: [['$','$']] } }); &lt;/script&gt;

&lt;h1 id=&quot;pigeon-oj&quot;&gt;Pigeon OJ&lt;/h1&gt;

&lt;p&gt;Pigeon OJ 是由上海科技大学 GeekPie 社团开发的一个基于 Docker 和 Gitlab 的多文件在线评测系统。&lt;/p&gt;

&lt;p&gt;在上学期的 CS100 后，该 OJ 已经尘封了一个学期了。 在下个学期的 SI100B 中，该 OJ 也会给新来的 20 届同学使用。在暑学期中， 该 OJ 还要为 专硕 的项目服务。&lt;/p&gt;

&lt;p&gt;OJ 的评卷系统是通过一个 scheduler 通过 TLS 连接 Docker API 调用 Docker 进行评卷。之前的评卷机在 CS100 课程结束后就被学校收回了。 所以现在我需要为其添加一个新的评卷机 ( &lt;strong&gt;Judger&lt;/strong&gt; )&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sozp6g.sn.files.1drv.com/y4m0CQRdGXS0RMOHS1FtC6sGvzQujWvZTDq5IT22jkUMLz594GgYa0fFjHPJDtQGppr8rJNFdjir93uz_rFgRGQOtOd8ZGxvfR2nn0s_txH7Jym_OdFBfJSfj7HxOyRy9aQ1h8pRmZuJJflirEwW74yJUjS8lgv4wCQrA5IeL0M5Ivy_Fc55lRfaG3ErtTGFGNPLGFoXCKetdggEmybzw_ipg?width=2736&amp;amp;height=1847&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;# Docker Remote API TLS 认证&lt;/p&gt;

&lt;p&gt;参考链接: &lt;a href=&quot;https://www.jianshu.com/p/a1bdc96b4163&quot;&gt;https://www.jianshu.com/p/a1bdc96b4163&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这里是我的配置:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;openssl genrsa &lt;span class=&quot;nt&quot;&gt;-aes256&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; ca-key.pem 4096
openssl req &lt;span class=&quot;nt&quot;&gt;-new&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-x509&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-days&lt;/span&gt; 365 &lt;span class=&quot;nt&quot;&gt;-key&lt;/span&gt; ca-key.pem &lt;span class=&quot;nt&quot;&gt;-sha256&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; ca.pem
openssl genrsa &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server-key.pem 4096
openssl req &lt;span class=&quot;nt&quot;&gt;-subj&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/CN={你的域名}&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sha256&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-new&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-key&lt;/span&gt; server-key.pem &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server.csr
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;subjectAltName &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; DNS:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;你的域名&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; extfile.cnf
openssl x509 &lt;span class=&quot;nt&quot;&gt;-req&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-days&lt;/span&gt; 365 &lt;span class=&quot;nt&quot;&gt;-sha256&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-in&lt;/span&gt; server.csr &lt;span class=&quot;nt&quot;&gt;-CA&lt;/span&gt; ca.pem &lt;span class=&quot;nt&quot;&gt;-CAkey&lt;/span&gt; ca-key.pem &lt;span class=&quot;nt&quot;&gt;-CAcreateserial&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server-cert.pem &lt;span class=&quot;nt&quot;&gt;-extfile&lt;/span&gt; extfile.cnf
openssl genrsa &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; key.pem 4096
openssl req &lt;span class=&quot;nt&quot;&gt;-subj&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/CN=client'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-new&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-key&lt;/span&gt; key.pem &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; client.csr
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;extendedKeyUsage &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; clientAuth &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; extfile.cnf
openssl x509 &lt;span class=&quot;nt&quot;&gt;-req&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-days&lt;/span&gt; 365 &lt;span class=&quot;nt&quot;&gt;-sha256&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-in&lt;/span&gt; client.csr &lt;span class=&quot;nt&quot;&gt;-CA&lt;/span&gt; ca.pem &lt;span class=&quot;nt&quot;&gt;-CAkey&lt;/span&gt; ca-key.pem &lt;span class=&quot;nt&quot;&gt;-CAcreateserial&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; cert.pem &lt;span class=&quot;nt&quot;&gt;-extfile&lt;/span&gt; extfile.cnf
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; client.csr server.csr
&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; 0400 ca-key.pem key.pem server-key.pem
&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; 0444 ca.pem server-cert.pem cert.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中， &lt;code class=&quot;highlighter-rouge&quot;&gt;{你的域名}&lt;/code&gt; 替换为你的域名  (e.g. aaaab3n.oj.geekpie.club)，或者直接使用 ip 。&lt;/p&gt;

&lt;p&gt;之后会生成 ca-key.pem key.pem server-key.pem ca.pem server-cert.pem cert.pem&lt;/p&gt;

&lt;p&gt;我创建了  ~/.docker 目录并把 &lt;code class=&quot;highlighter-rouge&quot;&gt;ca.pem&lt;/code&gt;  &lt;code class=&quot;highlighter-rouge&quot;&gt;server-cert.pem&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;server-key.pem&lt;/code&gt; 放入。&lt;/p&gt;

&lt;p&gt;之后编辑 /lib/systemd/system/docker.service&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;nv&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/bin/dockerd &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; unix:///var/run/docker.sock &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; tcp://0.0.0.0:443 &lt;span class=&quot;nt&quot;&gt;--tlsverify&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--tlscacert&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/canary/.docker/ca.pem &lt;span class=&quot;nt&quot;&gt;--tlscert&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/canary/.docker/server-cert.pem &lt;span class=&quot;nt&quot;&gt;--tlskey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/canary/.docker/server-key.pem


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这里有一个小坑是生成证书的时候我的本地时间没有调整为标准时间，因此之后 TLS 握手时出错。&lt;/p&gt;

&lt;h2 id=&quot;测试&quot;&gt;测试&lt;/h2&gt;

&lt;p&gt;将  &lt;code class=&quot;highlighter-rouge&quot;&gt;cert.pem&lt;/code&gt;  &lt;code class=&quot;highlighter-rouge&quot;&gt;key.pem&lt;/code&gt;  &lt;code class=&quot;highlighter-rouge&quot;&gt;ca.pem&lt;/code&gt; 传输到目标机器，运行命令  &lt;code class=&quot;highlighter-rouge&quot;&gt;curl https://{你的域名 / IP }:443/info --cert ./cert.pem --key ./key.pem --cacert ./ca.pem&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sezc6g.sn.files.1drv.com/y4muK2AUHw-sGPOIck-hxy9MEfJV6iDi5ZzhDpOq6MRo0jpA_uYr-5PWuHZepntLGS0Ro94_60ot7lZ5PMqLLEulK352GavemVCQLgoWUokLhr0QfkmNvPI68DtlWAhAzVIf9iz2kn4SOV45JnzULAy0gWXQ8uEJlwPfZrSvm8hH8LAizKf7pxLqPvS5Lwe1wpoaRik3rB6EMLqB99w6fDLjQ?width=1534&amp;amp;height=832&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;oj-配置&quot;&gt;OJ 配置&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;https://sozw6g.sn.files.1drv.com/y4mSwmlVCBWE4cU8f7R3lCgVQmT6K3GdFiXP_LHTyyilo9EoNCuE2FaopSN6Yklwl0p3KQK-YjgjgTRXXg54UxAdn64PgAwIwYmGZl6TWBbZQcMwW5e_uqwG1KlGADYMyIJX5uEmqJPn9l38AP0qQHwgOlspIEsNrTimCHygACUenx6-kURcG-ellxS6SR0cJo-iDd6I_vNSAb2Cdh5pQb9zQ?width=2736&amp;amp;height=1813&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Client Key -&amp;gt; key.pem&lt;/li&gt;
  &lt;li&gt;Client Cert -&amp;gt; cert.pem&lt;/li&gt;
  &lt;li&gt;Cert CA      -&amp;gt; ca.pem&lt;/li&gt;
  &lt;li&gt;MAx job     -&amp;gt; CPU逻辑处理器数&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;结合之前&lt;a href=&quot;https://aaaab3n.moe/technology/2020/07/07/618-workstation-setup-guide&quot;&gt;一篇文章&lt;/a&gt;，我将3900X处理器分配了12个线程给OJ使用。&lt;/p&gt;

&lt;h1 id=&quot;使用感受&quot;&gt;使用感受&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;https://sozu6g.sn.files.1drv.com/y4m1SdXpuAu0otJfNePqn920LfGswI1w1nQTAK_9E9tC_zmjjzshwIlSszWUK9qBWszVdYRU6vP22426OpNWdipN0FT_Rzu2H85qgV1c5GsuddP9YzVMYqvdk6EOB5mzeO05Al8NvtL3PGydUBW3_z5V6TbnP1XRrJWaG2utwz8_7dtCt6CtoTjFfJyV8xPs0RKsF3W9gpAmBiPeN4EVHWoUw?width=2026&amp;amp;height=1188&amp;amp;cropmode=none&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;就感觉到快，有催人AC的意思&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Canarypwn</name></author><category term="Technology" /><category term="Technology" /><summary type="html"></summary></entry></feed>